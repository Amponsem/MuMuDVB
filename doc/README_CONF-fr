README pour le fichier de configuration de mumudvb

= Configuration générale =

mumudvb utilise obligatoirement un fichier de configuration pour lui indiquer les différents paramètres de réception et la répartition des pids sur les ips de multicast (ces ips peuvent aussi bien être de l'unicast). Vous trouverez un exemple dans le fichier conf.example joint aux sources de mumudvb.

mumudvb est insensible à l'ordre des paramètres sauf pour les chaînes où les pids doivent être mis après l'ip et le port.

Des commentaires peuvent êtres fait n'importe où dans le fichier de configuration, ce sont les lignes qui commencent par un #

Tous les paramètres sont de la forme suivante : nom=valeur

'''Liste des paramètres et leur description '''
----
||'''Nom :'''                    ||'''valeur:'''                                ||
||freq                           ||la fréquence du transpondeur en MHz ||
||pol                            ||la polarisation (un caractère) v ou h (insensible à la casse) ||
||srate                          ||le srate du transpondeur ||
||sat_number                     ||le numéro du satellite (pour les utilisateurs de switchs diseqc) ||
||card                           ||le numéro de la carte (défaut : 0) ||
||timeout_accord                 ||temps que l'on laisse à la carte pour s'accorder sur la fréquence (en secondes) (défaut : 300 (5min)) ||
||timeout_no_diff                ||si le programme ne diffuse aucune chaîne, il se tuera au bout de ce temps (en secondes) (défaut : 600 (10min)) ||
||common_port                    ||Si vous ne voulez pas spécifier le port pour chaque chaine c'est le port qui sera utilisé par défaut (si vous utilisez autoconfiguration=2, défaut : 1234) ||
||multicast_ttl                  ||Si vous voulez utiliser un Time to Live différent de celui par défaut. ||
||rewrite_pat                    ||Spécifie si l'on veut la réécriture du PID PAT à la volée ||
||cam_support                    ||Spécifie si l'on veut le support pour les chaines cryptées ||
||cam_number                     ||Le numéro du module cam (défaut : 0) ||
||autoconfiguration              ||autoconfiguration 1: trouve les pids audio et video, 2: autoconfiguration complete, voir README-fr ||
||sap                            ||Génération des annonces sap : 0 non, 1 oui ||
||sap_organisation               ||Organisation précisée dans les annonces sap (optionel, défaut : mumudvb) ||
||sap_sending_ip                 ||Adresse ip de l'émetteur (optionel, défaut : 0.0.0.0) ||
||sap_interval                   ||Intervale en secondes entre les annonces sap (optionel, defaut : 5) ||
||'''Pour la TNT'''              ||
||qam                            ||la modulation en quadrature, valeurs possibles : qpsk,16,32,64,128,256,auto ||
||trans_mode                     ||le mode de transmission, valeurs possibles : 2k,8k,auto ||
||bandwidth                      ||la largeur de bande, valeurs possibles : 8MHz,7MHz,6MHz,auto ||
||guardinterval                  ||l'intervalle de garde, valeurs possibles : 1/32,1/16,1/8,1/4,auto ||
||coderate                       ||le taux de code, valeurs possibles : none,1/2,2/3,3/4,4/5,5/6,6/7,7/8,8/9,auto ||
||'''Pour chaque chaîne ''' (ordre conseillé : ip, port, ..., pids) ||
||ip                             ||l'ip de multicast sur laquelle cette chaise sera diffusée ||
||port                           ||le port ||
||cam_pmt_pid                    ||(uniquement pour les chaines crypées) numéro du PID PMT ||
||sap_group                      ||Le groupe sap pour la liste de lecture (optionnel, supporté seulement par VLC dans l'état actuel de mes connaissances) ||
||name                           ||le nom donné à la chaîne dans les fichiers qui indique les chaînes diffusées actuellement (utilisé par les scripts en exemple pour générer les annonces SAP) ||
||pids                           ||une liste de pids séparés par des espaces (en nombre quelconque, certains pids sont toujours diffusés (PAT EIT SDT TDT NIT)) ||


== Note ==

Si vous n'utilisez pas l'autoconfiguration, vous devez spécifier
 * Le pid audio
 * Le pid Vidéo
 * Le pid PMT
Il est conséillé de spécifier le pid PCR.

= Obtenir les PIDs =

Si vous n'utilisez pas l'autoconfiguration (voir README-fr), il vous faudra obtenir les PID (Program Identifier) de chaque chaine.

Pour obtenir les différents pids, le plus simple est d'utiliser les linuxtv-dvb-apps.
Vous accordez la carte sur la fréquence voulue.

Ensuite il suffit d'utiliser l'utilitaire scan : 
{{{scan -c -a """numero carte"""}}} (Note : cet exemple est pour le cas d'une carte déjà accordée avec szap ou tzap par exemple. Se référer à la documentation de scan pour plus de détails)

Et vous aurez un résultat du genre : 

{{{
using '/dev/dvb/adapter2/frontend0' and '/dev/dvb/adapter2/demux0'
0x0000 0x0101: pmt_pid 0x006e GR1 -- France 2 (running)
0x0000 0x0103: pmt_pid 0x019a GR1 -- France 4 (running)
0x0000 0x0104: pmt_pid 0x0136 GR1 -- France 5 (running)
0x0000 0x0105: pmt_pid 0x01fe GR1 -- ARTE (running)
0x0000 0x0106: pmt_pid 0x0262 GR1 -- LCP (running)
0x0000 0x0111: pmt_pid 0x00d2 Reg -- France 3 (running)
dumping lists (6 services)
France 2                 (0x0101) 01: PCR == V   V 0x0078 A 0x0082 (fra) SUB 0x008c
France 4                 (0x0103) 01: PCR == V   V 0x01a4 A 0x01ae (fra) SUB 0x01b8
France 5                 (0x0104) 01: PCR == V   V 0x0140 A 0x014a (fra) SUB 0x0154
ARTE                     (0x0105) 01: PCR == V   V 0x0208 A 0x0212 (fra) 0x0213 (deu) SUB 0x021e
LCP                      (0x0106) 01: PCR == V   V 0x026c A 0x0276 (fra) SUB 0x0280
France 3                 (0x0111) 01: PCR == V   V 0x00dc A 0x00e6 (fra) SUB 0x00f0
Done.
}}}

Vous pouvez aussi utiliser la version modifiée de scan qui permet de créer un fichier de configuration directement au format mumudvb
Pour cela compilez la version de scan jointe dans le répertoire tools (avec la commande make) et utilisez scan de la manière suivante : 
{{{./scan -c -a """numero carte""" -o mumudvb}}}

Vous pouvez aussi récupérer la configuration directement dans un fichier

{{{./scan -c -a """numero carte""" -o mumudvb > mumudvb.conf}}}

Attention le numéro de carte est à rajouter manuellement dans le fichier de configuration.

